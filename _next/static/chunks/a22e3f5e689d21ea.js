(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,71076,e=>{"use strict";var t=e.i(4070);let a=null,s=null,r=async()=>{if(a)return a;let{data:e,error:s}=await t.supabase.from("days").select("*").order("id");if(s)throw s;return a=e,e},l=async()=>{if(s)return s;let{data:e,error:a}=await t.supabase.from("time_slots").select("*").order("start_time");if(a)throw a;return s=e,e};e.s(["getDays",0,r,"getTimeSlots",0,l])},81293,e=>{"use strict";var t=e.i(33407);let a=null,s=null;async function r(){let e=Date.now();if(a&&s&&e-s<3e5)return console.log("Filtro: Usando cache de coursesRegistry"),a;console.log("Filtro: Buscando coursesRegistry do servidor");let r=performance.now(),l=await (0,t.loadCoursesRegistry)(),i=performance.now();return console.log("Filtro: coursesRegistry carregado em ".concat((i-r).toFixed(2),"ms")),a=l,s=e,l}async function l(e){console.log("ativas: Chamada para curso:",e);let a=await (0,t.loadClassesForGrid)();console.log("ativas: Dados recebidos do loadClassesForGrid:",null==a?void 0:a.length,"total de turmas/disciplinas");let s=a.filter(t=>!0===t._ag&&t._cu===e);return console.log("ativas: Disciplinas ativas filtradas para",e,":",s.length),void 0!==s?s:[]}async function i(e){let t=(await r()).find(t=>t._cu===e);return null==t?[]:t._hd}async function n(e){let t=(await r()).find(t=>t._cu===e);return void 0===t||void 0===t._da?[]:t._da}e.s(["ativas",()=>l,"dimencao",()=>n,"horarios",()=>i])},50073,e=>{"use strict";var t=e.i(84409);e.i(24445),e.s(["SavingSpinner",0,e=>{let{message:a="Salvando no Google Sheets..."}=e;return(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:(0,t.jsx)("div",{className:"bg-surface-light dark:bg-surface-dark rounded-xl border border-border-light dark:border-border-dark shadow-2xl p-8 max-w-sm",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"relative mb-4",children:[(0,t.jsx)("span",{className:"material-symbols-outlined text-6xl text-primary animate-pulse",children:"cloud_upload"}),(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-20 w-20 border-b-2 border-primary opacity-30"})})]}),(0,t.jsx)("p",{className:"text-text-light-primary dark:text-text-dark-primary text-lg font-semibold mb-2",children:a}),(0,t.jsx)("p",{className:"text-text-light-secondary dark:text-text-dark-secondary text-sm",children:"Por favor, aguarde..."})]})})})},"default",0,e=>{let{message:a="Carregando...",submessage:s=null,fullscreen:r=!0,size:l="lg"}=e;return(0,t.jsx)("div",{className:r?"flex items-center justify-center min-h-screen bg-background-light dark:bg-background-dark":"flex items-center justify-center p-8",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full ".concat({sm:"h-8 w-8",md:"h-12 w-12",lg:"h-16 w-16",xl:"h-20 w-20"}[l]," border-b-2 border-primary mx-auto mb-4")}),(0,t.jsx)("p",{className:"text-text-light-secondary dark:text-text-dark-secondary text-lg font-medium mb-2",children:a}),s&&(0,t.jsx)("p",{className:"text-xs text-text-light-secondary dark:text-text-dark-secondary opacity-75",children:s})]})})}])},78650,e=>{"use strict";function t(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);a.push.apply(a,s)}return a})(Object(t)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}),e}e.s(["_",()=>t])},56604,e=>{"use strict";var t=e.i(85289),a=e.i(78650),s=e.i(84409),r=e.i(24445),l=e.i(71076),i=e.i(33407);let n=["#E3F2FD","#E8F5E9","#FFFDE7","#FBE9E7","#F3E5F5","#E0F7FA","#F1F8E9","#FFF3E0","#EDE7F6","#FFEBEE"],o=Math.floor(Math.random()*n.length),c=new Date,d=c.getMonth()+1,u=c.getFullYear(),h="".concat(u,".").concat(d>6?"2":"1");e.s(["default",0,e=>{let c,[d,u]=(0,r.useState)({id:0,pageBlockStart:0,materias:e.materias||[]}),[m,x]=(0,r.useState)(!1),[g,f]=(0,r.useState)(null),[p,b]=(0,r.useState)(null),[y,j]=(0,r.useState)([]),[_,v]=(0,r.useState)([]),[w,k]=(0,r.useState)(!0),{cur:N,fun:S,separa:C,g:E,f:O}=e;N=N||window.location.href.split("/")[3]||"engcomp",(0,r.useEffect)(()=>{e.materias&&e.materias.length>0&&u(s=>(0,a._)((0,t._)({},s),{materias:e.materias,id:0,pageBlockStart:0}))},[e.materias]),(0,r.useEffect)(()=>{(async()=>{try{let[s,r]=await Promise.all([(0,l.getDays)(),(0,l.getTimeSlots)()]);if(j(s),v(r),!e.materias||0===e.materias.length){let e=await (0,i.loadClassesForGrid)();console.log("Comum: Loaded grid data from service",e.length);let s=e.filter(e=>!0===e._ag&&e._cu===N);u(e=>(0,a._)((0,t._)({},e),{materias:s,id:0,pageBlockStart:0}))}}catch(e){console.error("Erro ao carregar dados do cronograma:",e)}finally{k(!1)}})()},[N]);let F=_.length,M=y.length,P=y.map(e=>e.name);c=C?function(e){let t=[];for(let a of e){for(;t.length<a._se;)t.push([]);t[a._se-1]&&t[a._se-1].push(a)}return t.filter(e=>e&&e.length>0)}(d.materias):[d.materias];let{grades:G,coresGrade:T}=function(){d.materias.length>0&&(console.log("Comum: Starting grade creation with",d.materias.length,"disciplines"),console.log("Comum: Schedule Refs - Days:",y,"Slots:",_));let e=[],t=[];for(let a of c){let s=Array.from({length:F},()=>Array(M).fill("")),r=Array.from({length:F},()=>Array(M).fill(""));a.forEach((e,t)=>{let a=e._el||e._di.includes(" - OPT")?"":" - OPT";Array.isArray(e._ho)?e._ho.forEach((l,i)=>{let[c,d]=l,u=y.findIndex(e=>e.id===c),h=_.findIndex(e=>e.id===d);(-1===u||-1===h)&&console.warn("Comum: Mapping failed for ".concat(e._di,". DayID: ").concat(c," -> Idx: ").concat(u,". SlotID: ").concat(d," -> Idx: ").concat(h));let m=e._da&&e._da[i]?"".concat(e._di,"\n").concat(e._da[i]):e._di;h>=0&&h<F&&u>=0&&u<M&&(""===s[h][u]?s[h][u]=m+a:s[h][u]+=" / ".concat(m).concat(a),r[h][u]=n[(t+o)%n.length])}):console.warn("Comum: Disciplina ".concat(e._di," has invalid _ho:"),e._ho)}),e.push(s),t.push(r)}return{grades:e,coresGrade:t}}();return(0,s.jsxs)("div",{className:"flex flex-col items-center p-4  mx-auto min-w-[calc(1312px)]",children:[G&&G.length>1&&(0,s.jsxs)("div",{className:"flex justify-center items-center my-4 ".concat(m?"invisible":""),children:[!C&&G.length>10&&(0,s.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-l",onClick:()=>u(e=>(0,a._)((0,t._)({},e),{pageBlockStart:Math.max(0,e.pageBlockStart-10)})),disabled:0===d.pageBlockStart,children:"<<"}),G.slice(d.pageBlockStart,d.pageBlockStart+10).map((e,r)=>{let l=d.pageBlockStart+r;return(0,s.jsx)("button",{onClick:()=>{l!==d.id&&null===g&&(f(l),b({grade:G[d.id],cores:T[d.id]}),setTimeout(()=>{u(e=>(0,a._)((0,t._)({},e),{id:l})),f(null),b(null)},500))},className:"py-2 px-4 w-12 h-10 ".concat(d.id===l?"bg-blue-700 text-white":"bg-blue-500 hover:bg-blue-700 text-white"),children:l+1},l)}),!C&&G.length>10&&(0,s.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-r",onClick:()=>u(e=>(0,a._)((0,t._)({},e),{pageBlockStart:e.pageBlockStart+10})),disabled:d.pageBlockStart+10>=G.length,children:">>"})]}),(0,s.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-4 flex flex-col flex-1 w-full max-w-7xl",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h3",{className:"text-xl font-bold",children:m?"Grade - ".concat(h):"".concat(d.id+1).concat(E," ").concat(O," - ").concat(h)}),(0,s.jsxs)("div",{className:"flex items-center gap-2 ".concat(m?"invisible":""),children:[S,"ª"!==E?"":(0,s.jsx)("button",{onClick:()=>{x(!0),setTimeout(()=>{x(!1)},7e3)},className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Printe"})]})]}),function(){if(!G||0===G.length||!G[d.id])return w?(0,s.jsx)("div",{className:"flex justify-center items-center h-32",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):(0,s.jsx)("p",{className:"text-center my-4",children:"Não há grades para exibir."});let e=[];for(let a=0;a<F;a++){if(a>0){var t;let r=_[a-1].end_time,l=_[a].start_time;r&&l&&r!==l&&e.push((t="interval-".concat(a),(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:M+1,className:"bg-gray-800 text-white text-center p-1 text-xs",children:"Intervalo"})},t)))}e.push(function(e){if(!G||!G[d.id])return null;let t=_[e],a=t?"".concat(t.start_time?t.start_time.substring(0,5):""," - ").concat(t.end_time?t.end_time.substring(0,5):""):"???",r=Array.from({length:M}).map((t,a)=>{var r,l,i,n,o,c,u,h,m;let x,f,b,y,j,_;return r="cell-".concat(e,"-").concat(a),x=null!==g,b=(null==(i=G[f=null!==g?g:d.id])||null==(l=i[e])?void 0:l[a])||"",y=(null==(o=T[f])||null==(n=o[e])?void 0:n[a])||"transparent",j=(null==p||null==(u=p.grade)||null==(c=u[e])?void 0:c[a])||"",_=(null==p||null==(m=p.cores)||null==(h=m[e])?void 0:h[a])||"transparent",(0,s.jsxs)("td",{className:"relative border p-0 text-center text-xs",style:{minHeight:"50px"},children:[x&&(0,s.jsx)("div",{className:"absolute inset-0 p-1 animate-fade-out",style:{backgroundColor:_},children:j.split("\n").map((e,t)=>(0,s.jsx)("div",{children:e},t))}),(0,s.jsx)("div",{className:"absolute inset-0 p-1 ".concat(x?"animate-fade-in":""),style:{backgroundColor:y},children:b.split("\n").map((e,t)=>(0,s.jsx)("div",{children:e},t))})]},r)});return(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"border p-1 py-4 text-xs whitespace-nowrap",children:a}),r]},"row-".concat(e))}(a))}return(0,s.jsx)("div",{className:"overflow-x-auto overflow-y-auto ",children:(0,s.jsxs)("table",{className:"w-full border-collapse table-fixed",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-gray-200",children:[(0,s.jsx)("th",{className:"border p-1 text-xs w-24",children:"Horário"}),P.map(e=>(0,s.jsx)("th",{className:"border p-1 text-xs",children:e},e))]})}),(0,s.jsx)("tbody",{children:e})]})})}()]})]})}])},18560,e=>{"use strict";var t=e.i(85289),a=e.i(78650),s=e.i(84409),r=e.i(24445),l=e.i(87449),i=e.i(33407);let n=["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)","rgba(201, 203, 207, 1)","rgba(255, 99, 255, 1)","rgba(100, 255, 100, 1)","rgba(0, 191, 255, 1)"],o=n.map(e=>e.replace(", 1)",", 0.15)")),c=e=>{let{node:t,onNodeClick:a,selectedNodeId:r}=e,l={feita:{border:"rgba(0, 128, 0, 1)",background:"rgba(0, 128, 0, 0.15)"},podeFazer:{border:"rgba(0, 0, 255, 1)",background:"rgba(0, 0, 255, 0.15)"},naoPodeFazer:{border:"rgba(128, 128, 128, 1)",background:"rgba(128, 128, 128, 0.15)"},normal:{border:n[(t.depth-1)%n.length],background:o[(t.depth-1)%o.length]}},{border:i,background:c}=l[t.status]||l.normal;return t.id,(0,s.jsx)("g",{transform:"translate(".concat(t.x,", ").concat(t.y,")"),className:"transition-all duration-300 ease-in-out cursor-pointer",onClick:()=>a(t.id),children:(0,s.jsx)("foreignObject",{x:-180,y:-36,width:360,height:72,className:"group",children:(0,s.jsx)("div",{className:"w-full h-full p-6 shadow-lg flex items-center justify-center text-center font-medium transition-all duration-200",style:{border:"2px solid ".concat(i),backgroundColor:c,color:"hsl(var(--foreground))",borderRadius:"20px"},children:(0,s.jsxs)("p",{className:"line-clamp-2",style:{textAlign:"center",fontFamily:"sans-serif"},children:[t.name," (",t.id,")"]})})})})},d=e=>{let{node:t}=e;return(0,s.jsx)("g",{transform:"translate(".concat(t.x,", ").concat(t.y,")"),children:(0,s.jsx)("foreignObject",{x:-180,y:-t.height/2,width:360,height:t.height,children:(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,s.jsx)("h2",{className:"text-xl font-bold",style:{color:"hsl(var(--foreground))"},children:t.name})})})})},u=e=>{let{node:t,onNodeClick:a,selectedNodeId:r}=e;return"title"===t.type?(0,s.jsx)(d,{node:t}):(0,s.jsx)(c,{node:t,onNodeClick:a,selectedNodeId:r})},h=e=>{let{source:t,target:a,selectedNodeId:r}=e,l=t.x+180,i=t.y,n=a.x-180,o=a.y,c=r&&(t.id===r||a.id===r),d="black";c&&(a.id===r?d="blue":t.id===r&&(d="green"));let u="M ".concat(l," ").concat(i," C ").concat(l+60," ").concat(i,", ").concat(n-60," ").concat(o,", ").concat(n," ").concat(o);return(0,s.jsx)("path",{d:u,fill:"none",stroke:d,strokeWidth:"2",style:{opacity:+!!c,transition:"opacity 0.3s, stroke 0.3s"}})},m=e=>{let{nodes:l,links:i,selectedNodeId:n,onNodeClick:o,graphBounds:c,svgRef:d}=e,[m,x]=(0,r.useState)({x:0,y:0,width:800,height:600}),[g,f]=(0,r.useState)(window.innerWidth);(0,r.useEffect)(()=>{let e=()=>{f(window.innerWidth)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,r.useEffect)(()=>{if(d.current&&c){let e=d.current.clientWidth,t=d.current.clientHeight;if(0===e||0===t)return;let a=c.maxX-c.minX,s=c.maxY-c.minY,r=Math.min(e/a,t/s),l=e/r,i=t/r;x({x:c.minX+(a-l)/2,y:g>=1024?-200:c.minY+(s-i)/2,width:l,height:i})}},[c,g]);let[p,b]=(0,r.useState)(!1),[y,j]=(0,r.useState)({x:0,y:0}),_=e=>{p&&(b(!1),e.currentTarget.style.cursor="grab")};return l&&0!==l.length?(0,s.jsx)("svg",{ref:d,width:"100%",height:"100%",className:"cursor-grab bg-muted/10",viewBox:"".concat(m.x," ").concat(m.y," ").concat(m.width," ").concat(m.height),onMouseDown:e=>{e.target===d.current&&(b(!0),j({x:e.clientX,y:e.clientY}),e.currentTarget.style.cursor="grabbing")},onMouseMove:e=>{if(p){var s,r;let l=m.width/((null==(s=d.current)?void 0:s.clientWidth)||m.width),i=m.height/((null==(r=d.current)?void 0:r.clientHeight)||m.height),n=(e.clientX-y.x)*l,o=(e.clientY-y.y)*i;x(e=>{let s=e.x-n,r=e.y-o;return c&&(s=Math.max(c.minX,Math.min(s,c.maxX-e.width)),r=Math.max(c.minY,Math.min(r,c.maxY-e.height))),(0,a._)((0,t._)({},e),{x:s,y:r})}),j({x:e.clientX,y:e.clientY})}},onMouseUp:_,onMouseLeave:_,onWheel:e=>{var t;if(e.preventDefault(),!d.current||!c)return;let{clientX:a,clientY:s}=e,r=d.current.createSVGPoint();r.x=a,r.y=s;let l=null==(t=d.current.getScreenCTM())?void 0:t.inverse();if(!l)return;let{x:i,y:n}=r.matrixTransform(l),o=e.deltaY>0?1.1*m.width:m.width/1.1,u=e.deltaY>0?1.1*m.height:m.height/1.1,h=c.maxX-c.minX,g=c.maxY-c.minY;o>h&&(o=h),u>g&&(u=g),o<360&&(o=360),u<360*(m.height/m.width)&&(u=360*(m.height/m.width));let f=i-(i-m.x)*(o/m.width),p=n-(n-m.y)*(u/m.height);x({x:f=Math.max(c.minX,Math.min(f,c.maxX-o)),y:p=Math.max(c.minY,Math.min(p,c.maxY-u)),width:o,height:u})},children:(0,s.jsxs)("g",{children:[i.map((e,t)=>(0,s.jsx)(h,{source:e.source,target:e.target,selectedNodeId:n},"".concat(e.source.id,"-").concat(e.target.id,"-").concat(t))),l.map(e=>(0,s.jsx)(u,{node:e,onNodeClick:o},e.id))]})}):(0,s.jsx)("div",{className:"flex items-center justify-center h-full",children:"Nenhum dado para exibir."})};e.s(["default",0,e=>{let{subjectStatus:n,onVoltar:o}=e,c=(0,l.useParams)(),d=null==c?void 0:c.cur,[u,h]=(0,r.useState)(null),[x,g]=(0,r.useState)(!0),[f,p]=(0,r.useState)(null),b=(0,r.useRef)(null),y=(0,r.useCallback)(e=>{p(t=>t===e?null:e)},[]),j=(0,r.useCallback)((e,s)=>{let r=new Map;e.forEach(e=>{e._ag&&!r.has(e._re)&&r.set(e._re,(0,a._)((0,t._)({},e),{id:e._re,name:e._di}))});let l=new Map;e.forEach(e=>{e._ag&&(l.has(e._se)||l.set(e._se,[]),l.get(e._se).includes(e._re)||l.get(e._se).push(e._re))});let i=[];Array.from(l.keys()).sort((e,t)=>e-t).forEach(e=>{let n=l.get(e),o=(e-1)*400;i.push({id:"period-title-".concat(e),name:"".concat(e,"º Período"),type:"title",x:o,y:-100,width:240,height:50,depth:e}),n.forEach((l,n)=>{let c=r.get(l);if(c){var d,u;let r="naoPodeFazer";(null==s||null==(d=s.feitas)?void 0:d.includes(l))?r="feita":(null==s||null==(u=s.podeFazer)?void 0:u.includes(l))&&(r="podeFazer"),i.push((0,a._)((0,t._)({},c),{type:"subject",status:s?r:"normal",x:o,y:100*n,width:100,height:72,depth:e}))}})});let n=[],o=i.filter(e=>"subject"===e.type);o.forEach(e=>{e._pr&&e._pr.forEach(t=>{let a=o.find(e=>e._re===t);a&&n.push({source:a,target:e})})});let c=1/0,d=1/0,u=-1/0,h=-1/0;return i.forEach(e=>{c=Math.min(c,e.x),d=Math.min(d,e.y),u=Math.max(u,e.x+e.width),h=Math.max(h,e.y+e.height)}),{nodes:i,links:n,graphBounds:{minX:c-200,minY:d-200,maxX:u+200,maxY:h+200}}},[]);return((0,r.useEffect)(()=>{(async()=>{g(!0);let e=(await (0,i.loadDbData)()).filter(e=>e._cu===d);e.length>0&&h(j(e,n)),g(!1)})()},[d,n,j]),x)?(0,s.jsx)("div",{children:"Carregando mapa mental..."}):u&&0!==u.nodes.length?(0,s.jsxs)("div",{className:"flex flex-col p-4 mx-auto",children:[(0,s.jsxs)("div",{className:"flex w-full lg:flex-row sm:flex-col  lg:justify-between sm:justify-center sm:align-center sm:gap-3 lg:gap-4",children:[(0,s.jsxs)("h1",{className:"text-2xl font-bold",children:["Mapa de Pré-requisitos - ",d]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2 justify-right sm:justify-center lg:justify-end items-center",children:o&&(0,s.jsxs)("button",{onClick:o,className:"flex items-center justify-center gap-2 rounded-lg h-10 px-4 bg-primary text-white text-sm font-bold hover:bg-primary/90 transition-colors",children:[(0,s.jsx)("span",{className:"material-symbols-outlined text-xl",children:"arrow_back"}),"Voltar"]})})]}),(0,s.jsx)(m,{svgRef:b,nodes:u.nodes,links:u.links,selectedNodeId:f,onNodeClick:y,graphBounds:u.graphBounds})]}):(0,s.jsx)("div",{children:"Não há dados para exibir o mapa mental deste curso."})}],18560)},48542,e=>{"use strict";var t=e.i(85289),a=e.i(78650),s=e.i(84409),r=e.i(24445),l=e.i(87449),i=e.i(56604);class n{matriz(){console.log("Grafos.matriz(): Iniciando filtragem..."),console.log("Grafos.matriz(): Total de matérias:",this.materias.length),console.log("Grafos.matriz(): Créditos:",this.cr),console.log("Grafos.matriz(): Matérias feitas (re):",this.re);let e=this.materias.filter(e=>{let t=this.re.includes(e._re),a=this.temRequisitos(e._pr);return!t&&(a?(console.log("  ✅ ".concat(e._re," (").concat(e._di,") - PODE fazer. Pré-req: ").concat(JSON.stringify(e._pr))),!0):(console.log("  ❌ ".concat(e._re," (").concat(e._di,") - NÃO pode fazer. Pré-req: ").concat(JSON.stringify(e._pr))),!1))});return console.log("Grafos.matriz(): Resultado:",e.length,"matérias podem ser feitas"),e}temRequisitos(e){if(!e||0===e.length)return console.log("    ✓ Sem pré-requisitos"),!0;console.log("    Verificando ".concat(e.length," pré-requisito(s): ").concat(JSON.stringify(e)));let t=e.every(e=>{let t=Number.isInteger(e),a=t&&this.cr>=parseInt(String(e)),s=!t&&this.re.includes(String(e)),r=a||s;return t?console.log("      ".concat(r?"✓":"✗"," Crédito: ").concat(e," (você tem: ").concat(this.cr,")")):console.log("      ".concat(r?"✓":"✗"," Matéria: ").concat(e," (").concat(s?"FEITA":"NÃO FEITA",")")),r});return console.log("    Resultado final: ".concat(t?"✓ TODOS OK":"✗ FALTAM REQUISITOS")),t}getHorarios(e){return Array.isArray(e._ho)?e._ho:[]}constructor(e,t,a){this.materias=e,this.cr=t,this.re=a}}var o=e.i(81293);let c=["seg","ter","qua","qui","sex"],d=class{_print(){let e="",t="";if(this.m._pr&&this.m._ho){for(let t=this.m._pr.length-1;t>=0;t--)e+='"'+this.m._pr[t]+'"',0!==t&&(e+=", ");for(let e=0;e<c.length;e++)t+='"'+c[e]+'": ["'+this.m._ho[e][0]+'", "'+this.m._ho[e][1]+'"] ',e<c.length-1&&(t+=", \n		")}return 0===t.length?"":(", "===t.substring(t.length-2)&&(t=t.substring(0,t.length-2)),'{\n	"semestre": '+this.m._se+', \n	"horario": {\n		'+t+'\n	}, \n	"pre requisitos": ['+e+'], \n	"aulas praticas": '+this.m._ap+', \n	"aulas teoricas": '+this.m._at+', \n	"referencia": "'+this.m._re+'", \n	"eletiva": '+this.m._el+', \n	"disciplina": "'+this.m._di+'"\n}')}constructor(e,t=[0,0]){this.m={_cu:"",_di:"",_ap:0,_at:0,_pr:[],_ag:!1,_se:0,_re:"",_el:!1,_ho:[]};const[a,s]=t,r=[];for(let e=0;e<a;e++)r.push(!1);for(let e=0;e<s;e++)this.m._ho&&this.m._ho.push([...r])}};class u{async init(){return this.dimensao=await (0,o.dimencao)(this.cur),this}reduz(){for(;this.genesis.length>15;){let e=Math.floor(Math.random()*this.genesis.length);this.genesis.splice(e,1)}}count(e){return e.reduce((e,t)=>"1"===t?e+1:e,0)}exc(){let e=[],t=2**this.genesis.length-1;for(;t>0;){let a=t.toString(2).padStart(this.genesis.length,"0").split("");if(t--,this.count(a)>=9)continue;let s=[],r=new d(this.cur,this.dimensao||[0,0]).m,l=!0;for(let e in a)if("1"===a[e]){let t=this.genesis[e];if(this.colide(r,t)&&!this.existe(s,t))s.push(t),r=this.merge(t,r);else{l=!1;break}}l&&e.push(s)}return e.sort(this.compare)}compare(e,t){return t.length-e.length}merge(e,t){let a=new Set(t._ho.map(e=>e.join(",")));for(let s of e._ho){let e=s.join(",");a.has(e)||(t._ho.push(s),a.add(e))}return t}existe(e,t){for(let a of e)if(t._re===a._re)return!0;return!1}colide(e,t){let a=new Set(e._ho.map(e=>e.join(",")));for(let e of t._ho)if(a.has(e.join(",")))return!1;return!0}constructor(e,t){this.genesis=e,this.cur=t,this.dimensao=null,this.reduz()}}var h=e.i(18560),m=e.i(50073);e.s(["default",0,()=>{let e=(0,l.useParams)(),c=(null==e?void 0:e.cur)||"engcomp",[d,x]=(0,r.useState)({names:[],keys:[],estado:0,x:[],crs:[]}),[g,f]=(0,r.useState)(""),[p,b]=(0,r.useState)(null),[y,j]=(0,r.useState)([]),[_,v]=(0,r.useState)([]),[w,k]=(0,r.useState)([]),[N,S]=(0,r.useState)([]),[C,E]=(0,r.useState)([0,0]),[O,F]=(0,r.useState)(!0),M=(0,r.useRef)(c),[P,G]=(0,r.useState)(null);function T(e){let t=e.target;if(t.classList.contains("period-toggle")){let e=t.checked,a=document.getElementById(t.value);if(a)for(let t of a.getElementsByClassName("subject-checkbox")){let a=0===d.estado?d.keys.indexOf(parseInt(t.value)):d.x.indexOf(t.id);e&&-1===a?D(!0,t):!e&&a>-1&&D(!1,t)}}else t.classList.contains("subject-checkbox")&&D(t.checked,t)}function D(e,s){if(0===d.estado){let r=parseInt(s.value);x(l=>{let i=[...l.keys],n=[...l.names],o=[...l.crs];if(e)i.includes(r)||(i.push(r),n.push(s.id),o.push(parseInt(s.name)));else{let e=i.indexOf(r);e>-1&&(i.splice(e,1),n.splice(e,1),o.splice(e,1))}return(0,a._)((0,t._)({},l),{keys:i,names:n,crs:o})})}else 1===d.estado&&x(r=>(0,a._)((0,t._)({},r),{x:e?[...r.x,s.id]:r.x.filter(e=>e!==s.id)}))}function B(e){let t=[],a=new Set;for(let s of e)a.has(s._re)||(a.add(s._re),s._di.includes(" - A")||s._di.includes(" - B")?s._di=s._di.substring(0,s._di.length-4):s._el||s._di.includes(" - OPT")||(s._di+=" - OPT"),t.push(s));return t}function z(e){let t={};for(let a of e)t[a._se]||(t[a._se]=[]),t[a._se].push(a);return t}function I(e){let{periodKey:t,subjectsData:a,openPeriodKey:r,setOpenPeriodKey:l}=e,i=a.map(e=>e._re),n=0===d.estado?d.names:d.x,o=i.length>0&&i.every(e=>n.includes(e)),c=a.filter(e=>n.includes(e._re)).length,u=r===t;return(0,s.jsxs)("details",{className:"flex flex-col rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900/50 group",open:u,children:[(0,s.jsxs)("summary",{className:"flex cursor-pointer items-center justify-between gap-6 py-3 px-4",onClick:e=>{u?l(null):l(t)},children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",className:"period-toggle h-5 w-5 rounded border-slate-300 dark:border-slate-600 border-2 bg-transparent text-primary checked:bg-primary checked:border-primary checked:bg-[image:url('data:image/svg+xml,%3csvg viewBox=%270 0 16 16%27 fill=%27rgb(255,255,255)%27 xmlns=%27http://www.w3.org/2000/svg%27%3e%3cpath d=%27M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z%27/%3e%3c/svg%3e')] focus:ring-2 focus:ring-offset-2 focus:ring-offset-white dark:focus:ring-offset-slate-900/50 focus:ring-primary/50 focus:outline-none",checked:o,onChange:T,onClick:e=>e.stopPropagation(),value:t}),(0,s.jsx)("p",{className:"text-slate-900 dark:text-white text-base font-semibold leading-normal",children:"".concat(t,"º Período | ").concat(c," matéria(s) selecionada(s)")})]}),(0,s.jsx)("div",{className:"text-slate-900 dark:text-white group-open:rotate-180 transition-transform",children:(0,s.jsx)("span",{className:"material-symbols-outlined",children:"expand_more"})})]}),(0,s.jsx)("div",{className:"border-t border-slate-200 dark:border-slate-800",children:(0,s.jsx)("div",{id:t,className:"grid grid-cols-2 sm:grid-cols-3 gap-x-4 px-4 divide-y divide-slate-200 dark:divide-slate-800",children:a.map(e=>{var t;let a,r=_.findIndex(t=>t._re===e._re);return t=0===d.estado?r:e._re,a=0===d.estado?d.names.includes(e._re):d.x.includes(e._re),(0,s.jsxs)("label",{className:"flex items-center gap-x-4 py-3 cursor-pointer",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("input",{type:"checkbox",name:String(e._ap+e._at),checked:a,className:"subject-checkbox h-5 w-5 rounded border-slate-300 dark:border-slate-600 border-2 bg-transparent text-primary checked:bg-primary checked:border-primary checked:bg-[image:url('data:image/svg+xml,%3csvg viewBox=%270 0 16 16%27 fill=%27rgb(255,255,255)%27 xmlns=%27http://www.w3.org/2000/svg%27%3e%3cpath d=%27M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z%27/%3e%3c/svg%3e')] focus:ring-2 focus:ring-offset-2 focus:ring-offset-white dark:focus:ring-offset-slate-900/50 focus:ring-primary/50 focus:outline-none",id:e._re,value:t,onChange:T}),(0,s.jsxs)("div",{className:"flex flex-col flex-1",children:[(0,s.jsxs)("p",{className:"text-slate-800 dark:text-slate-200 text-base font-normal leading-normal",children:[e._re," - ",e._di]}),(0,s.jsxs)("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:[e._ap+e._at," créditos"]})]})]},e._re)})})})]})}function A(e){if(1===e){let s=d.crs.reduce((e,t)=>e+t,0);console.log("mudaTela(1): Créditos totais:",s),console.log("mudaTela(1): Matérias feitas (state.names):",d.names),console.log("mudaTela(1): Total de disciplinas (arr):",_.length);let r=new n(_,s,d.names).matriz();console.log("mudaTela(1): Matérias que pode fazer (calculatedGr):",r.length),console.log("mudaTela(1): Primeiras 3 matérias calculadas:",r.slice(0,3).map(e=>({_re:e._re,_di:e._di,_pr:e._pr}))),j(r),x(s=>(0,a._)((0,t._)({},s),{estado:e}))}else x(s=>(0,a._)((0,t._)({},s),{estado:e}));window.scrollTo(0,0)}function R(){if(0===d.estado){let e=z(B(_.filter(e=>e._di.toLowerCase().includes(g.toLowerCase())||e._re.toLowerCase().includes(g.toLowerCase()))));return(0,s.jsx)("div",{className:"flex flex-col py-4 gap-4",children:Object.keys(e).map(t=>(0,s.jsx)(I,{periodKey:t,subjectsData:e[t],openPeriodKey:p,setOpenPeriodKey:b},t))})}if(1===d.estado){let e=z(B(y));return 0===Object.keys(e).length?(0,s.jsx)("div",{className:"flex flex-col py-4 gap-4",children:(0,s.jsxs)("details",{className:"flex flex-col rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900/50 px-4 group",children:[(0,s.jsxs)("summary",{className:"flex cursor-pointer items-center justify-between gap-6 py-3",children:[(0,s.jsx)("p",{className:"text-slate-900 dark:text-white text-base font-semibold leading-normal",children:"Períodos Disponíveis"}),(0,s.jsx)("div",{className:"text-slate-900 dark:text-white group-open:rotate-180 transition-transform",children:(0,s.jsx)("span",{className:"material-symbols-outlined",children:"expand_more"})})]}),(0,s.jsx)("div",{className:"border-t border-slate-200 dark:border-slate-800 -mx-4",children:(0,s.jsx)("p",{className:"text-slate-500 dark:text-slate-400 text-sm font-normal leading-normal p-4",children:"Parabéns, você concluiu todas as matérias!"})})]})}):(0,s.jsx)("div",{className:"flex flex-col py-4 gap-4",children:Object.keys(e).map(t=>(0,s.jsx)(I,{periodKey:t,subjectsData:e[t],openPeriodKey:p,setOpenPeriodKey:b},t))})}{let e=(0,s.jsx)("button",{onClick:()=>A(1),className:"flex w-full cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 py-2 px-4 bg-gray-300 text-gray-800 text-base font-bold leading-normal tracking-[0.015em] hover:bg-gray-400 focus:ring-2 focus:ring-gray-500 focus:outline-none",children:"Voltar"});return 0===w.length&&y.length>0?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mb-4"}),(0,s.jsx)("p",{className:"text-text-light-secondary dark:text-text-dark-secondary mb-2",children:"Calculando grades possíveis..."}),(0,s.jsxs)("p",{className:"text-sm text-text-light-secondary dark:text-text-dark-secondary",children:["Processando ",y.length," disciplinas"]})]}):(0,s.jsx)(i.default,{materias:w,tela:2,fun:e,cur:c,separa:!1,g:"ª",f:" Grade Possível",courseSchedule:N,courseDimension:C})}}return(0,r.useEffect)(()=>{(async()=>{F(!0);try{c!==M.current&&(M.current=c,x({names:[],keys:[],crs:[],estado:0,x:[]}));let[e,t,a]=await Promise.all([(0,o.ativas)(c),(0,o.horarios)(c),(0,o.dimencao)(c)]);v(e),S(t),E(a)}catch(e){console.error("Error fetching data for GeraGrade:",e)}finally{F(!1)}})()},[c]),(0,r.useEffect)(()=>{(async()=>{if(2===d.estado&&y.length>0){console.log("GeraGrade: Calculando grades possíveis..."),console.log("GeraGrade: gradesResult length:",y.length),console.log("GeraGrade: state.x:",d.x);let e=y.filter(e=>!d.x.includes(e._re));console.log("GeraGrade: Matérias após filtro:",e.length);let t=(await new u(e,c).init()).exc();console.log("GeraGrade: Grades geradas:",t.length),k(t.slice(0,50)),console.log("GeraGrade: possibleGrades atualizado com",t.slice(0,50).length,"grades")}else console.log("GeraGrade: Não calculando grades. Estado:",d.estado,"gradesResult:",y.length)})()},[d.estado,d.x,y,c]),O?(0,s.jsx)(m.default,{message:"Carregando dados da grade..."}):4===d.estado?(0,s.jsx)(h.default,{subjectStatus:{feitas:d.names,podeFazer:y.map(e=>e._re)},onVoltar:()=>x(e=>(0,a._)((0,t._)({},e),{estado:1}))}):2===d.estado?R():(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("aside",{className:"flex flex-col items-center p-4  mx-auto ",children:(0,s.jsxs)("div",{className:"px-4 py-4 w-full",children:[(0,s.jsxs)("div",{className:"flex w-full lg:flex-row sm:flex-col  lg:justify-between sm:justify-center sm:align-center sm:gap-3 lg:gap-4",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-text-light-primary dark:text-text-dark-primary lg:text-left",children:0===d.estado?"Selecione as máterias já cursadas":1===d.estado?"Exclua as matérias que não deseja fazer agora":void 0}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 justify-right sm:justify-center lg:justify-end items-center",children:[1===d.estado&&(0,s.jsxs)("button",{onClick:()=>A(0),className:"flex items-center gap-2 px-4 py-2.5 rounded-lg text-sm font-medium transition-colors bg-background-light dark:bg-background-dark border border-border-light dark:border-border-dark hover:bg-surface-light dark:hover:bg-surface-dark",children:[(0,s.jsx)("span",{className:"material-symbols-outlined text-lg",children:"arrow_back"}),(0,s.jsx)("span",{children:"Voltar"})]}),0===d.estado&&(0,s.jsxs)("button",{onClick:()=>A(1),className:"flex items-center gap-2 px-5 py-2.5 rounded-lg text-sm font-medium transition-colors bg-primary text-white hover:bg-primary/90 shadow-sm",children:[(0,s.jsx)("span",{children:"Avançar"}),(0,s.jsx)("span",{className:"material-symbols-outlined text-lg",children:"arrow_forward"})]}),1===d.estado&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{onClick:()=>{x(e=>(0,a._)((0,t._)({},e),{estado:4}))},className:"flex items-center gap-2 px-4 py-2.5 rounded-lg text-sm font-medium transition-colors bg-blue-500 text-white hover:bg-blue-600 shadow-sm",children:[(0,s.jsx)("span",{className:"material-symbols-outlined text-lg",children:"account_tree"}),(0,s.jsx)("span",{children:"Cronograma"})]}),(0,s.jsxs)("button",{onClick:()=>A(2),className:"flex items-center gap-2 px-5 py-2.5 rounded-lg text-sm font-medium transition-colors bg-primary text-white hover:bg-primary/90 shadow-sm",children:[(0,s.jsx)("span",{className:"material-symbols-outlined text-lg",children:"grid_view"}),(0,s.jsx)("span",{children:"Gerar Grades"})]})]})]})]}),(0,s.jsx)("div",{className:"flex justify-center items-center mt-4",children:(d.crs.reduce((e,t)=>e+t,0),0===d.estado&&0===d.names.length)?(0,s.jsx)("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Nenhuma matéria selecionada"}):(0,s.jsxs)("div",{className:"flex flex-row sm:flex-row gap-3 sm:gap-6 items-center",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:"Matérias:"}),(0,s.jsx)("p",{className:"text-lg font-bold text-primary",children:d.names.length})]}),(0,s.jsx)("div",{className:"hidden sm:block w-px h-6 bg-border-light dark:bg-border-dark"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:"Créditos:"}),(0,s.jsx)("p",{className:"text-lg font-bold text-primary",children:d.crs.reduce((e,t)=>e+t,0)})]})]})})]})}),(0,s.jsx)("div",{className:"font-display bg-background-light dark:bg-background-dark min-h-screen",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,s.jsx)("div",{className:"px-4 py-6",children:(0,s.jsx)("div",{className:"layout-content-container flex flex-col w-full",children:R()})})})})]})}],48542)}]);