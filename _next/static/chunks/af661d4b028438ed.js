(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,50073,e=>{"use strict";var r=e.i(84409);e.i(24445),e.s(["SavingSpinner",0,e=>{let{message:t="Salvando no Google Sheets..."}=e;return(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:(0,r.jsx)("div",{className:"bg-surface-light dark:bg-surface-dark rounded-xl border border-border-light dark:border-border-dark shadow-2xl p-8 max-w-sm",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("div",{className:"relative mb-4",children:[(0,r.jsx)("span",{className:"material-symbols-outlined text-6xl text-primary animate-pulse",children:"cloud_upload"}),(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-20 w-20 border-b-2 border-primary opacity-30"})})]}),(0,r.jsx)("p",{className:"text-text-light-primary dark:text-text-dark-primary text-lg font-semibold mb-2",children:t}),(0,r.jsx)("p",{className:"text-text-light-secondary dark:text-text-dark-secondary text-sm",children:"Por favor, aguarde..."})]})})})},"default",0,e=>{let{message:t="Carregando...",submessage:a=null,fullscreen:s=!0,size:l="lg"}=e;return(0,r.jsx)("div",{className:s?"flex items-center justify-center min-h-screen bg-background-light dark:bg-background-dark":"flex items-center justify-center p-8",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full ".concat({sm:"h-8 w-8",md:"h-12 w-12",lg:"h-16 w-16",xl:"h-20 w-20"}[l]," border-b-2 border-primary mx-auto mb-4")}),(0,r.jsx)("p",{className:"text-text-light-secondary dark:text-text-dark-secondary text-lg font-medium mb-2",children:t}),a&&(0,r.jsx)("p",{className:"text-xs text-text-light-secondary dark:text-text-dark-secondary opacity-75",children:a})]})})}])},97517,e=>{"use strict";var r=e.i(84409),t=e.i(24445),a=e.i(87449),s=e.i(56533),l=e.i(4070);let i=async(e,r,t,a,s)=>{try{let{data:i,error:d}=await l.supabase.functions.invoke("create-preference",{body:{title:e,unit_price:r,quantity:1,email:t,name:a,userId:s}});if(d)throw d;return{success:!0,init_point:i.init_point,sandbox_init_point:i.sandbox_init_point}}catch(e){return console.error("Erro ao criar preferência de pagamento:",e),{success:!1,error:e.message}}};var d=e.i(50073);e.s(["default",0,()=>{let[e,l]=(0,t.useState)(""),[n,o]=(0,t.useState)(""),[c,x]=(0,t.useState)(""),[m,u]=(0,t.useState)(""),[b,h]=(0,t.useState)(""),[p,g]=(0,t.useState)(!1),[y,k]=(0,t.useState)(!1),[f,j]=(0,t.useState)(!1),[N,v]=(0,t.useState)(!1),[w,C]=(0,t.useState)(""),{login:S,register:_}=(0,s.useAuth)(),{createPreference:A,paymentLink:P,loading:E}=(()=>{let[e,r]=(0,t.useState)(!1),[a,s]=(0,t.useState)(null),[l,d]=(0,t.useState)(null);return{loading:e,error:a,paymentLink:l,createPreference:async(e,t,a,l,n)=>{r(!0),s(null);try{let r=await i(e,t,a,l,n);if(r.success)return d(r.init_point),{success:!0,init_point:r.init_point};return s(r.error),{success:!1,error:r.error}}catch(e){return s(e.message||"Erro inesperado ao criar pagamento"),{success:!1,error:e.message}}finally{r(!1)}},resetPayment:()=>{d(null),s(null),r(!1)}}})(),T=(0,a.useRouter)(),z=(0,a.useSearchParams)().get("from")||"/",I=async r=>{r.preventDefault(),h(""),g(!0);try{if(f){if(n!==c){h("As senhas não coincidem."),g(!1);return}let r=await _(e,n,m);if(r.success){let t=await A("Acesso Vitalício - Horários CEFET",50,e,m,r.user.id);t.success?(C(t.init_point),v(!0)):(console.error("Erro ao gerar pagamento:",t.error),h("Conta criada, mas houve um erro ao gerar o pagamento. Tente fazer login."))}else h(r.error)}else{let r=await S(e,n);r.success?T.push(z):h(r.error)}}catch(e){h("Ocorreu um erro inesperado. Tente novamente."),console.error(e)}g(!1)};return p&&!N?(0,r.jsx)(d.default,{message:f?"Criando sua conta...":"Autenticando..."}):(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-background-light via-surface-light to-background-light dark:from-background-dark dark:via-surface-dark dark:to-background-dark flex items-center justify-center p-4",children:[N&&(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-fadeIn",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-surface-dark rounded-2xl shadow-2xl max-w-md w-full p-8 border border-border-light dark:border-border-dark animate-scaleIn",children:[(0,r.jsxs)("div",{className:"text-center mb-6",children:[(0,r.jsx)("div",{className:"w-20 h-20 rounded-full bg-green-500/10 flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("span",{className:"material-symbols-outlined text-5xl text-green-500",children:"payments"})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-text-light-primary dark:text-text-dark-primary mb-2",children:"Conta Criada com Sucesso!"}),(0,r.jsx)("p",{className:"text-text-light-secondary dark:text-text-dark-secondary",children:"Para liberar seu acesso, é necessário realizar o pagamento da taxa de adesão."})]}),(0,r.jsxs)("div",{className:"bg-surface-light dark:bg-background-dark p-4 rounded-xl mb-6 border border-border-light dark:border-border-dark",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"Item"}),(0,r.jsx)("span",{className:"text-sm font-medium text-text-light-secondary dark:text-text-dark-secondary",children:"Valor"})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center text-lg font-bold text-text-light-primary dark:text-text-dark-primary",children:[(0,r.jsx)("span",{children:"Acesso Vitalício"}),(0,r.jsx)("span",{children:"R$ 50,00"})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[w?(0,r.jsxs)("a",{href:w,target:"_blank",rel:"noopener noreferrer",className:"block w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-4 rounded-xl text-center transition-all transform hover:scale-[1.02] shadow-lg flex items-center justify-center gap-2",children:[(0,r.jsx)("span",{children:"Pagar com Mercado Pago"}),(0,r.jsx)("span",{className:"material-symbols-outlined",children:"open_in_new"})]}):(0,r.jsx)("div",{className:"text-red-500 text-center text-sm p-2 bg-red-100 dark:bg-red-900/20 rounded",children:"Erro ao carregar link de pagamento. Tente novamente mais tarde."}),(0,r.jsx)("button",{onClick:()=>{v(!1),j(!1),h("Após o pagamento, aguarde a liberação do seu acesso.")},className:"w-full bg-transparent hover:bg-black/5 dark:hover:bg-white/5 text-text-light-secondary dark:text-text-dark-secondary font-semibold py-3 rounded-xl transition-colors",children:"Já realizei o pagamento"})]})]})}),(0,r.jsxs)("div",{className:"w-full max-w-md",children:[(0,r.jsxs)("div",{className:"bg-surface-light dark:bg-surface-dark rounded-2xl shadow-2xl border border-border-light dark:border-border-dark overflow-hidden",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-r from-primary to-primary/80 p-8 text-center",children:[(0,r.jsx)("div",{className:"w-20 h-20 rounded-full bg-white/20 flex items-center justify-center mx-auto mb-4 backdrop-blur-sm",children:(0,r.jsx)("span",{className:"material-symbols-outlined text-5xl text-white",children:f?"person_add":"lock"})}),(0,r.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:f?"Criar Conta":"Área Restrita"}),(0,r.jsx)("p",{className:"text-white/90 text-sm",children:f?"Preencha os dados para se cadastrar":"Acesso exclusivo para administradores"})]}),(0,r.jsxs)("form",{onSubmit:I,className:"p-8 space-y-6",children:[b&&(0,r.jsxs)("div",{className:"bg-red-500/10 border border-red-500/50 rounded-lg p-4 flex items-start gap-3",children:[(0,r.jsx)("span",{className:"material-symbols-outlined text-red-500 text-xl",children:"error"}),(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)("p",{className:"text-sm font-medium text-red-500",children:b})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-text-light-primary dark:text-text-dark-primary",children:"E-mail"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-text-light-secondary dark:text-text-dark-secondary text-xl",children:"mail"}),(0,r.jsx)("input",{type:"email",value:e,onChange:e=>l(e.target.value),className:"w-full pl-12 pr-4 py-3 rounded-lg border border-border-light dark:border-border-dark bg-background-light dark:bg-background-dark text-text-light-primary dark:text-text-dark-primary focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"Digite seu e-mail",required:!0,autoFocus:!0})]})]}),f&&(0,r.jsxs)("div",{className:"space-y-2 animate-fadeIn",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-text-light-primary dark:text-text-dark-primary",children:"Nome Completo"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-text-light-secondary dark:text-text-dark-secondary text-xl",children:"badge"}),(0,r.jsx)("input",{type:"text",value:m,onChange:e=>u(e.target.value),className:"w-full pl-12 pr-4 py-3 rounded-lg border border-border-light dark:border-border-dark bg-background-light dark:bg-background-dark text-text-light-primary dark:text-text-dark-primary focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"Digite seu nome",required:!0})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-text-light-primary dark:text-text-dark-primary",children:"Senha"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-text-light-secondary dark:text-text-dark-secondary text-xl",children:"key"}),(0,r.jsx)("input",{type:y?"text":"password",value:n,onChange:e=>o(e.target.value),className:"w-full pl-12 pr-12 py-3 rounded-lg border border-border-light dark:border-border-dark bg-background-light dark:bg-background-dark text-text-light-primary dark:text-text-dark-primary focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"Digite sua senha",required:!0,minLength:6}),(0,r.jsx)("button",{type:"button",onClick:()=>k(!y),className:"absolute right-3 top-1/2 -translate-y-1/2 text-text-light-secondary dark:text-text-dark-secondary hover:text-primary transition-colors",children:(0,r.jsx)("span",{className:"material-symbols-outlined text-xl",children:y?"visibility_off":"visibility"})})]})]}),f&&(0,r.jsxs)("div",{className:"space-y-2 animate-fadeIn",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-text-light-primary dark:text-text-dark-primary",children:"Confirmar Senha"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-text-light-secondary dark:text-text-dark-secondary text-xl",children:"lock_clock"}),(0,r.jsx)("input",{type:y?"text":"password",value:c,onChange:e=>x(e.target.value),className:"w-full pl-12 pr-4 py-3 rounded-lg border border-border-light dark:border-border-dark bg-background-light dark:bg-background-dark text-text-light-primary dark:text-text-dark-primary focus:ring-2 focus:ring-primary focus:border-transparent transition-all",placeholder:"Confirme sua senha",required:!0,minLength:6})]})]}),(0,r.jsx)("button",{type:"submit",disabled:p,className:"w-full bg-primary hover:bg-primary/90 text-white font-semibold py-3 rounded-lg transition-colors flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl",children:p?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),(0,r.jsx)("span",{children:f?"Cadastrando...":"Autenticando..."})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:f?"Cadastrar":"Entrar"}),(0,r.jsx)("span",{className:"material-symbols-outlined text-xl",children:f?"person_add":"arrow_forward"})]})}),(0,r.jsx)("div",{className:"text-center pt-2",children:(0,r.jsx)("button",{type:"button",onClick:()=>{j(!f),h("")},className:"text-sm text-primary hover:text-primary/80 font-medium transition-colors",children:f?"Já tem uma conta? Faça login":"Não tem conta? Cadastre-se"})})]}),(0,r.jsx)("div",{className:"px-8 pb-8 text-center",children:(0,r.jsxs)("button",{onClick:()=>T.push("/"),className:"text-sm text-text-light-secondary dark:text-text-dark-secondary hover:text-primary transition-colors flex items-center gap-1 mx-auto",children:[(0,r.jsx)("span",{className:"material-symbols-outlined text-base",children:"arrow_back"}),(0,r.jsx)("span",{children:"Voltar para Home"})]})})]}),!f&&(0,r.jsx)("div",{className:"mt-6 bg-blue-500/10 border border-blue-500/30 rounded-lg p-4 text-center",children:(0,r.jsxs)("p",{className:"text-sm text-blue-600 dark:text-blue-400 flex items-center justify-center gap-2",children:[(0,r.jsx)("span",{className:"material-symbols-outlined text-base",children:"info"}),(0,r.jsx)("span",{children:"Acesso restrito a usuários autorizados"})]})})]})]})}],97517)}]);