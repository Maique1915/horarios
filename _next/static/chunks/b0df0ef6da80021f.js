(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,78650,e=>{"use strict";function t(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}e.s(["_",()=>t])},18560,e=>{"use strict";var t=e.i(85289),r=e.i(78650),n=e.i(84409),a=e.i(24445),i=e.i(87449),l=e.i(33407);let s=["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)","rgba(201, 203, 207, 1)","rgba(255, 99, 255, 1)","rgba(100, 255, 100, 1)","rgba(0, 191, 255, 1)"],c=s.map(e=>e.replace(", 1)",", 0.15)")),o=e=>{let{node:t,onNodeClick:r,selectedNodeId:a}=e,i={feita:{border:"rgba(0, 128, 0, 1)",background:"rgba(0, 128, 0, 0.15)"},podeFazer:{border:"rgba(0, 0, 255, 1)",background:"rgba(0, 0, 255, 0.15)"},naoPodeFazer:{border:"rgba(128, 128, 128, 1)",background:"rgba(128, 128, 128, 0.15)"},normal:{border:s[(t.depth-1)%s.length],background:c[(t.depth-1)%c.length]}},{border:l,background:o}=i[t.status]||i.normal;return t.id,(0,n.jsx)("g",{transform:"translate(".concat(t.x,", ").concat(t.y,")"),className:"transition-all duration-300 ease-in-out cursor-pointer",onClick:()=>r(t.id),children:(0,n.jsx)("foreignObject",{x:-180,y:-36,width:360,height:72,className:"group",children:(0,n.jsx)("div",{className:"w-full h-full p-6 shadow-lg flex items-center justify-center text-center font-medium transition-all duration-200",style:{border:"2px solid ".concat(l),backgroundColor:o,color:"hsl(var(--foreground))",borderRadius:"20px"},children:(0,n.jsxs)("p",{className:"line-clamp-2",style:{textAlign:"center",fontFamily:"sans-serif"},children:[t.name," (",t.id,")"]})})})})},d=e=>{let{node:t}=e;return(0,n.jsx)("g",{transform:"translate(".concat(t.x,", ").concat(t.y,")"),children:(0,n.jsx)("foreignObject",{x:-180,y:-t.height/2,width:360,height:t.height,children:(0,n.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,n.jsx)("h2",{className:"text-xl font-bold",style:{color:"hsl(var(--foreground))"},children:t.name})})})})},h=e=>{let{node:t,onNodeClick:r,selectedNodeId:a}=e;return"title"===t.type?(0,n.jsx)(d,{node:t}):(0,n.jsx)(o,{node:t,onNodeClick:r,selectedNodeId:a})},u=e=>{let{source:t,target:r,selectedNodeId:a}=e,i=t.x+180,l=t.y,s=r.x-180,c=r.y,o=a&&(t.id===a||r.id===a),d="black";o&&(r.id===a?d="blue":t.id===a&&(d="green"));let h="M ".concat(i," ").concat(l," C ").concat(i+60," ").concat(l,", ").concat(s-60," ").concat(c,", ").concat(s," ").concat(c);return(0,n.jsx)("path",{d:h,fill:"none",stroke:d,strokeWidth:"2",style:{opacity:+!!o,transition:"opacity 0.3s, stroke 0.3s"}})},g=e=>{let{nodes:i,links:l,selectedNodeId:s,onNodeClick:c,graphBounds:o,svgRef:d}=e,[g,m]=(0,a.useState)({x:0,y:0,width:800,height:600}),[x,f]=(0,a.useState)(window.innerWidth);(0,a.useEffect)(()=>{let e=()=>{f(window.innerWidth)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,a.useEffect)(()=>{if(d.current&&o){let e=d.current.clientWidth,t=d.current.clientHeight;if(0===e||0===t)return;let r=o.maxX-o.minX,n=o.maxY-o.minY,a=Math.min(e/r,t/n),i=e/a,l=t/a;m({x:o.minX+(r-i)/2,y:x>=1024?-200:o.minY+(n-l)/2,width:i,height:l})}},[o,x]);let[p,b]=(0,a.useState)(!1),[y,j]=(0,a.useState)({x:0,y:0}),w=e=>{p&&(b(!1),e.currentTarget.style.cursor="grab")};return i&&0!==i.length?(0,n.jsx)("svg",{ref:d,width:"100%",height:"100%",className:"cursor-grab bg-muted/10",viewBox:"".concat(g.x," ").concat(g.y," ").concat(g.width," ").concat(g.height),onMouseDown:e=>{e.target===d.current&&(b(!0),j({x:e.clientX,y:e.clientY}),e.currentTarget.style.cursor="grabbing")},onMouseMove:e=>{if(p){var n,a;let i=g.width/((null==(n=d.current)?void 0:n.clientWidth)||g.width),l=g.height/((null==(a=d.current)?void 0:a.clientHeight)||g.height),s=(e.clientX-y.x)*i,c=(e.clientY-y.y)*l;m(e=>{let n=e.x-s,a=e.y-c;return o&&(n=Math.max(o.minX,Math.min(n,o.maxX-e.width)),a=Math.max(o.minY,Math.min(a,o.maxY-e.height))),(0,r._)((0,t._)({},e),{x:n,y:a})}),j({x:e.clientX,y:e.clientY})}},onMouseUp:w,onMouseLeave:w,onWheel:e=>{var t;if(e.preventDefault(),!d.current||!o)return;let{clientX:r,clientY:n}=e,a=d.current.createSVGPoint();a.x=r,a.y=n;let i=null==(t=d.current.getScreenCTM())?void 0:t.inverse();if(!i)return;let{x:l,y:s}=a.matrixTransform(i),c=e.deltaY>0?1.1*g.width:g.width/1.1,h=e.deltaY>0?1.1*g.height:g.height/1.1,u=o.maxX-o.minX,x=o.maxY-o.minY;c>u&&(c=u),h>x&&(h=x),c<360&&(c=360),h<360*(g.height/g.width)&&(h=360*(g.height/g.width));let f=l-(l-g.x)*(c/g.width),p=s-(s-g.y)*(h/g.height);m({x:f=Math.max(o.minX,Math.min(f,o.maxX-c)),y:p=Math.max(o.minY,Math.min(p,o.maxY-h)),width:c,height:h})},children:(0,n.jsxs)("g",{children:[l.map((e,t)=>(0,n.jsx)(u,{source:e.source,target:e.target,selectedNodeId:s},"".concat(e.source.id,"-").concat(e.target.id,"-").concat(t))),i.map(e=>(0,n.jsx)(h,{node:e,onNodeClick:c},e.id))]})}):(0,n.jsx)("div",{className:"flex items-center justify-center h-full",children:"Nenhum dado para exibir."})};e.s(["default",0,e=>{let{subjectStatus:s,onVoltar:c}=e,o=(0,i.useParams)(),d=null==o?void 0:o.cur,[h,u]=(0,a.useState)(null),[m,x]=(0,a.useState)(!0),[f,p]=(0,a.useState)(null),b=(0,a.useRef)(null),y=(0,a.useCallback)(e=>{p(t=>t===e?null:e)},[]),j=(0,a.useCallback)((e,n)=>{let a=new Map;e.forEach(e=>{e._ag&&!a.has(e._re)&&a.set(e._re,(0,r._)((0,t._)({},e),{id:e._re,name:e._di}))});let i=new Map;e.forEach(e=>{e._ag&&(i.has(e._se)||i.set(e._se,[]),i.get(e._se).includes(e._re)||i.get(e._se).push(e._re))});let l=[];Array.from(i.keys()).sort((e,t)=>e-t).forEach(e=>{let s=i.get(e),c=(e-1)*400;l.push({id:"period-title-".concat(e),name:"".concat(e,"º Período"),type:"title",x:c,y:-100,width:240,height:50,depth:e}),s.forEach((i,s)=>{let o=a.get(i);if(o){var d,h;let a="naoPodeFazer";(null==n||null==(d=n.feitas)?void 0:d.includes(i))?a="feita":(null==n||null==(h=n.podeFazer)?void 0:h.includes(i))&&(a="podeFazer"),l.push((0,r._)((0,t._)({},o),{type:"subject",status:n?a:"normal",x:c,y:100*s,width:100,height:72,depth:e}))}})});let s=[],c=l.filter(e=>"subject"===e.type);c.forEach(e=>{e._pr&&e._pr.forEach(t=>{let r=c.find(e=>e._re===t);r&&s.push({source:r,target:e})})});let o=1/0,d=1/0,h=-1/0,u=-1/0;return l.forEach(e=>{o=Math.min(o,e.x),d=Math.min(d,e.y),h=Math.max(h,e.x+e.width),u=Math.max(u,e.y+e.height)}),{nodes:l,links:s,graphBounds:{minX:o-200,minY:d-200,maxX:h+200,maxY:u+200}}},[]);return((0,a.useEffect)(()=>{(async()=>{x(!0);let e=(await (0,l.loadDbData)()).filter(e=>e._cu===d);e.length>0&&u(j(e,s)),x(!1)})()},[d,s,j]),m)?(0,n.jsx)("div",{children:"Carregando mapa mental..."}):h&&0!==h.nodes.length?(0,n.jsxs)("div",{className:"flex flex-col p-4 mx-auto",children:[(0,n.jsxs)("div",{className:"flex w-full lg:flex-row sm:flex-col  lg:justify-between sm:justify-center sm:align-center sm:gap-3 lg:gap-4",children:[(0,n.jsxs)("h1",{className:"text-2xl font-bold",children:["Mapa de Pré-requisitos - ",d]}),(0,n.jsx)("div",{className:"flex flex-wrap gap-2 justify-right sm:justify-center lg:justify-end items-center",children:c&&(0,n.jsxs)("button",{onClick:c,className:"flex items-center justify-center gap-2 rounded-lg h-10 px-4 bg-primary text-white text-sm font-bold hover:bg-primary/90 transition-colors",children:[(0,n.jsx)("span",{className:"material-symbols-outlined text-xl",children:"arrow_back"}),"Voltar"]})})]}),(0,n.jsx)(g,{svgRef:b,nodes:h.nodes,links:h.links,selectedNodeId:f,onNodeClick:y,graphBounds:h.graphBounds})]}):(0,n.jsx)("div",{children:"Não há dados para exibir o mapa mental deste curso."})}],18560)}]);