(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,81293,e=>{"use strict";var t=e.i(33407);let a=null,r=null;async function s(){let e=Date.now();if(a&&r&&e-r<3e5)return console.log("Filtro: Usando cache de coursesRegistry"),a;console.log("Filtro: Buscando coursesRegistry do servidor");let s=performance.now(),l=await (0,t.loadCoursesRegistry)(),n=performance.now();return console.log("Filtro: coursesRegistry carregado em ".concat((n-s).toFixed(2),"ms")),a=l,r=e,l}async function l(e){console.log("ativas: Chamada para curso:",e);let a=await (0,t.loadClassesForGrid)();console.log("ativas: Dados recebidos do loadClassesForGrid:",null==a?void 0:a.length,"total de turmas/disciplinas");let r=a.filter(t=>!0===t._ag&&t._cu===e);return console.log("ativas: Disciplinas ativas filtradas para",e,":",r.length),void 0!==r?r:[]}async function n(e){let t=(await s()).find(t=>t._cu===e);return null==t?[]:t._hd}async function i(e){let t=(await s()).find(t=>t._cu===e);return void 0===t||void 0===t._da?[]:t._da}e.s(["ativas",()=>l,"dimencao",()=>i,"horarios",()=>n])},71076,e=>{"use strict";var t=e.i(4070);let a=null,r=null,s=async()=>{if(a)return a;let{data:e,error:r}=await t.supabase.from("days").select("*").order("id");if(r)throw r;return a=e,e},l=async()=>{if(r)return r;let{data:e,error:a}=await t.supabase.from("time_slots").select("*").order("start_time");if(a)throw a;return r=e,e};e.s(["getDays",0,s,"getTimeSlots",0,l])},50073,e=>{"use strict";var t=e.i(84409);e.i(24445),e.s(["SavingSpinner",0,e=>{let{message:a="Salvando no Google Sheets..."}=e;return(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:(0,t.jsx)("div",{className:"bg-surface-light dark:bg-surface-dark rounded-xl border border-border-light dark:border-border-dark shadow-2xl p-8 max-w-sm",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"relative mb-4",children:[(0,t.jsx)("span",{className:"material-symbols-outlined text-6xl text-primary animate-pulse",children:"cloud_upload"}),(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-20 w-20 border-b-2 border-primary opacity-30"})})]}),(0,t.jsx)("p",{className:"text-text-light-primary dark:text-text-dark-primary text-lg font-semibold mb-2",children:a}),(0,t.jsx)("p",{className:"text-text-light-secondary dark:text-text-dark-secondary text-sm",children:"Por favor, aguarde..."})]})})})},"default",0,e=>{let{message:a="Carregando...",submessage:r=null,fullscreen:s=!0,size:l="lg"}=e;return(0,t.jsx)("div",{className:s?"flex items-center justify-center min-h-screen bg-background-light dark:bg-background-dark":"flex items-center justify-center p-8",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full ".concat({sm:"h-8 w-8",md:"h-12 w-12",lg:"h-16 w-16",xl:"h-20 w-20"}[l]," border-b-2 border-primary mx-auto mb-4")}),(0,t.jsx)("p",{className:"text-text-light-secondary dark:text-text-dark-secondary text-lg font-medium mb-2",children:a}),r&&(0,t.jsx)("p",{className:"text-xs text-text-light-secondary dark:text-text-dark-secondary opacity-75",children:r})]})})}])},78650,e=>{"use strict";function t(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a.push.apply(a,r)}return a})(Object(t)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}),e}e.s(["_",()=>t])},56604,e=>{"use strict";var t=e.i(85289),a=e.i(78650),r=e.i(84409),s=e.i(24445),l=e.i(71076),n=e.i(33407);let i=["#E3F2FD","#E8F5E9","#FFFDE7","#FBE9E7","#F3E5F5","#E0F7FA","#F1F8E9","#FFF3E0","#EDE7F6","#FFEBEE"],o=Math.floor(Math.random()*i.length),c=new Date,d=c.getMonth()+1,u=c.getFullYear(),m="".concat(u,".").concat(d>6?"2":"1");e.s(["default",0,e=>{let c,[d,u]=(0,s.useState)({id:0,pageBlockStart:0,materias:e.materias||[]}),[x,h]=(0,s.useState)(!1),[g,p]=(0,s.useState)(null),[f,b]=(0,s.useState)(null),[y,j]=(0,s.useState)([]),[v,w]=(0,s.useState)([]),[N,_]=(0,s.useState)(!0),{cur:k,fun:S,separa:F,g:E,f:C}=e;k=k||window.location.href.split("/")[3]||"engcomp",(0,s.useEffect)(()=>{e.materias&&e.materias.length>0&&u(r=>(0,a._)((0,t._)({},r),{materias:e.materias,id:0,pageBlockStart:0}))},[e.materias]),(0,s.useEffect)(()=>{(async()=>{try{let[r,s]=await Promise.all([(0,l.getDays)(),(0,l.getTimeSlots)()]);if(j(r),w(s),!e.materias||0===e.materias.length){let e=await (0,n.loadClassesForGrid)();console.log("Comum: Loaded grid data from service",e.length);let r=e.filter(e=>!0===e._ag&&e._cu===k);u(e=>(0,a._)((0,t._)({},e),{materias:r,id:0,pageBlockStart:0}))}}catch(e){console.error("Erro ao carregar dados do cronograma:",e)}finally{_(!1)}})()},[k]);let D=v.length,O=y.length,B=y.map(e=>e.name);c=F?function(e){let t=[];for(let a of e){for(;t.length<a._se;)t.push([]);t[a._se-1]&&t[a._se-1].push(a)}return t.filter(e=>e&&e.length>0)}(d.materias):[d.materias];let{grades:P,coresGrade:A}=function(){d.materias.length>0&&(console.log("Comum: Starting grade creation with",d.materias.length,"disciplines"),console.log("Comum: Schedule Refs - Days:",y,"Slots:",v));let e=[],t=[];for(let a of c){let r=Array.from({length:D},()=>Array(O).fill("")),s=Array.from({length:D},()=>Array(O).fill(""));a.forEach((e,t)=>{let a=e._el||e._di.includes(" - OPT")?"":" - OPT";Array.isArray(e._ho)?e._ho.forEach((l,n)=>{let[c,d]=l,u=y.findIndex(e=>e.id===c),m=v.findIndex(e=>e.id===d);(-1===u||-1===m)&&console.warn("Comum: Mapping failed for ".concat(e._di,". DayID: ").concat(c," -> Idx: ").concat(u,". SlotID: ").concat(d," -> Idx: ").concat(m));let x=e._da&&e._da[n]?"".concat(e._di,"\n").concat(e._da[n]):e._di;m>=0&&m<D&&u>=0&&u<O&&(""===r[m][u]?r[m][u]=x+a:r[m][u]+=" / ".concat(x).concat(a),s[m][u]=i[(t+o)%i.length])}):console.warn("Comum: Disciplina ".concat(e._di," has invalid _ho:"),e._ho)}),e.push(r),t.push(s)}return{grades:e,coresGrade:t}}();return(0,r.jsxs)("div",{className:"flex flex-col items-center p-4  mx-auto min-w-[calc(1312px)]",children:[P&&P.length>1&&(0,r.jsxs)("div",{className:"flex justify-center items-center my-4 ".concat(x?"invisible":""),children:[!F&&P.length>10&&(0,r.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-l",onClick:()=>u(e=>(0,a._)((0,t._)({},e),{pageBlockStart:Math.max(0,e.pageBlockStart-10)})),disabled:0===d.pageBlockStart,children:"<<"}),P.slice(d.pageBlockStart,d.pageBlockStart+10).map((e,s)=>{let l=d.pageBlockStart+s;return(0,r.jsx)("button",{onClick:()=>{l!==d.id&&null===g&&(p(l),b({grade:P[d.id],cores:A[d.id]}),setTimeout(()=>{u(e=>(0,a._)((0,t._)({},e),{id:l})),p(null),b(null)},500))},className:"py-2 px-4 w-12 h-10 ".concat(d.id===l?"bg-blue-700 text-white":"bg-blue-500 hover:bg-blue-700 text-white"),children:l+1},l)}),!F&&P.length>10&&(0,r.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-r",onClick:()=>u(e=>(0,a._)((0,t._)({},e),{pageBlockStart:e.pageBlockStart+10})),disabled:d.pageBlockStart+10>=P.length,children:">>"})]}),(0,r.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-4 flex flex-col flex-1 w-full max-w-7xl",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h3",{className:"text-xl font-bold",children:x?"Grade - ".concat(m):"".concat(d.id+1).concat(E," ").concat(C," - ").concat(m)}),(0,r.jsxs)("div",{className:"flex items-center gap-2 ".concat(x?"invisible":""),children:[S,"ª"!==E?"":(0,r.jsx)("button",{onClick:()=>{h(!0),setTimeout(()=>{h(!1)},7e3)},className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Printe"})]})]}),function(){if(!P||0===P.length||!P[d.id])return N?(0,r.jsx)("div",{className:"flex justify-center items-center h-32",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):(0,r.jsx)("p",{className:"text-center my-4",children:"Não há grades para exibir."});let e=[];for(let a=0;a<D;a++){if(a>0){var t;let s=v[a-1].end_time,l=v[a].start_time;s&&l&&s!==l&&e.push((t="interval-".concat(a),(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:O+1,className:"bg-gray-800 text-white text-center p-1 text-xs",children:"Intervalo"})},t)))}e.push(function(e){if(!P||!P[d.id])return null;let t=v[e],a=t?"".concat(t.start_time?t.start_time.substring(0,5):""," - ").concat(t.end_time?t.end_time.substring(0,5):""):"???",s=Array.from({length:O}).map((t,a)=>{var s,l,n,i,o,c,u,m,x;let h,p,b,y,j,v;return s="cell-".concat(e,"-").concat(a),h=null!==g,b=(null==(n=P[p=null!==g?g:d.id])||null==(l=n[e])?void 0:l[a])||"",y=(null==(o=A[p])||null==(i=o[e])?void 0:i[a])||"transparent",j=(null==f||null==(u=f.grade)||null==(c=u[e])?void 0:c[a])||"",v=(null==f||null==(x=f.cores)||null==(m=x[e])?void 0:m[a])||"transparent",(0,r.jsxs)("td",{className:"relative border p-0 text-center text-xs",style:{minHeight:"50px"},children:[h&&(0,r.jsx)("div",{className:"absolute inset-0 p-1 animate-fade-out",style:{backgroundColor:v},children:j.split("\n").map((e,t)=>(0,r.jsx)("div",{children:e},t))}),(0,r.jsx)("div",{className:"absolute inset-0 p-1 ".concat(h?"animate-fade-in":""),style:{backgroundColor:y},children:b.split("\n").map((e,t)=>(0,r.jsx)("div",{children:e},t))})]},s)});return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"border p-1 py-4 text-xs whitespace-nowrap",children:a}),s]},"row-".concat(e))}(a))}return(0,r.jsx)("div",{className:"overflow-x-auto overflow-y-auto ",children:(0,r.jsxs)("table",{className:"w-full border-collapse table-fixed",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"bg-gray-200",children:[(0,r.jsx)("th",{className:"border p-1 text-xs w-24",children:"Horário"}),B.map(e=>(0,r.jsx)("th",{className:"border p-1 text-xs",children:e},e))]})}),(0,r.jsx)("tbody",{children:e})]})})}()]})]})}])},39245,e=>{"use strict";var t=e.i(84409),a=e.i(24445),r=e.i(87449),s=e.i(81293),l=e.i(56604),n=e.i(50073);e.s(["default",0,()=>{let e=(0,r.useParams)(),i=(null==e?void 0:e.cur)||"engcomp",[o,c]=(0,a.useState)([]),[d,u]=(0,a.useState)(!0),[m,x]=(0,a.useState)(null),[h,g]=(0,a.useState)([]),[p,f]=(0,a.useState)([0,0]);return((0,a.useEffect)(()=>{(async()=>{try{u(!0),console.log("Quadro: Carregando dados para curso:",i);let e=performance.now(),[t,a,r]=await Promise.all([(0,s.ativas)(i),(0,s.horarios)(i),(0,s.dimencao)(i)]),l=performance.now();console.log("Quadro: Dados recebidos em",(l-e).toFixed(2),"ms"),console.log("Quadro:",null==t?void 0:t.length,"disciplinas"),c(t),g(a),f(r),x(null)}catch(e){console.error("Quadro: Erro ao carregar dados:",e),x(e.message)}finally{u(!1)}})()},[i]),d)?(0,t.jsx)(n.default,{message:"Carregando disciplinas..."}):m?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsxs)("div",{className:"text-center text-red-500",children:[(0,t.jsx)("p",{className:"text-xl font-bold mb-2",children:"Erro ao carregar dados"}),(0,t.jsx)("p",{children:m})]})}):o&&0!==o.length?(0,t.jsx)(l.default,{materias:o,tela:1,cur:i,separa:!0,g:"º",f:" Período",courseSchedule:h,courseDimension:p}):(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-xl font-bold text-text-light-primary dark:text-text-dark-primary mb-2",children:"Nenhuma disciplina encontrada"}),(0,t.jsxs)("p",{className:"text-text-light-secondary dark:text-text-dark-secondary",children:["Curso: ",i]})]})})}])}]);